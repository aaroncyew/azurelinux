From 330e0a80ef2cc2c830a15299939b929c3d2f8767 Mon Sep 17 00:00:00 2001
From: Yann Ylavic <ylavic@apache.org>
Date: Fri, 20 Jul 2018 15:04:55 +0000
Subject: [PATCH] core: follow up to r1836237: core filter's tmp_flush_bb not
 used anymore.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1836354 13f79535-47bb-0310-9956-ffa450edef68
---
 server/core_filters.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/server/core_filters.c b/server/core_filters.c
index 77770eb0da9..fce04a1ac8d 100644
--- a/server/core_filters.c
+++ b/server/core_filters.c
@@ -79,7 +79,6 @@ do { \
 
 struct core_output_filter_ctx {
     apr_bucket_brigade *buffered_bb;
-    apr_bucket_brigade *tmp_flush_bb;
     apr_pool_t *deferred_write_pool;
     apr_size_t bytes_written;
     struct iovec *vec;
@@ -476,12 +475,10 @@ apr_status_t ap_core_output_filter(ap_filter_t *f, apr_bucket_brigade *new_bb)
         ctx = apr_pcalloc(c->pool, sizeof(*ctx));
         net->out_ctx = (core_output_filter_ctx_t *)ctx;
         /*
-         * Need to create tmp brigade with correct lifetime. Passing
-         * NULL to apr_brigade_split_ex would result in a brigade
+         * Need to create buffered_bb brigade with correct lifetime. Passing
+         * NULL to ap_save_brigade() would result in a brigade
          * allocated from bb->pool which might be wrong.
          */
-        ctx->tmp_flush_bb = apr_brigade_create(c->pool, c->bucket_alloc);
-        /* same for buffered_bb and ap_save_brigade */
         ctx->buffered_bb = apr_brigade_create(c->pool, c->bucket_alloc);
     }
 
